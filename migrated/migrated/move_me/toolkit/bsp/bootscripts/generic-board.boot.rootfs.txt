
# ----------------------------------------------------------------------------
#
# DFT rootfs u-boot script for Generic Board
#
# Generation date : __GENERATION_DATE__
# DFT version     : __DFT_VERSION__
#

#
# Definition of environment variables
#
setenv fstype       __FILESYSTEM_TYPE__
setenv fdtfile      'boot/default.dtb'
setenv image        'boot/zImage'
setenv mmcroot      '/dev/mmcblk0p1 rootwait rw'
setenv mmcargs      'setenv bootargs console=${console} root=${mmcroot} rootfstype=${fstype}'
setenv mmcdev       0
setenv mmcpart      1

#
# Definition of the macro needed to load DTB Kernel and initrd to ram
#
setenv loadfdt 'load mmc ${mmcdev}:${mmcpart} ${fdt_addr_r} ${fdtfile}'
setenv loadimage 'load mmc ${mmcdev}:${mmcpart} ${kernel_addr_r} ${image}'

#
# Definition of the macro needed to run the kernel using only dtb (no initrd in rootfs mode)
#
setenv mmcboot 'run mmcargs ; run loadimage ; run loadfdt ; bootz ${kernel_addr_r} - ${fdt_addr_r}'

#
# Thunderbirds are go !
#
run mmcboot
