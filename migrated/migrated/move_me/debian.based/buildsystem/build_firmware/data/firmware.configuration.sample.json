// TODO Configuration for rootfs and initramfs
// TODO Block with generic configuration ? 
// TODO groups of groups ?
// TODO version range and version blacklist for packages

// ----------------------------------------------------------------------------
//
// Definition of the distributions used to bootstrap firmware construction
//
{ "distributions" : [
		// Debian 7.0 Jessie
		{ 
			"name" : "Debian Jessie" ,
			"architecture" : [
				"amd64" ,
				"i386" ,
				"armel" ,
				"armhf"
			 ] ,
			"repositories"	: [
				{ 
					"url" : "http://ftp.fr.debian.org/debian/" ,
					"suite" : "jessie" ,
					"sections" : [
						"main" ,
						"contrib" ,
						"non-free"
					]
				} ,
				{ 
					"url" : "http://security.debian.org/debian/" ,
					"suite" : "jessie/updates" ,
					"sections" : [
						"main" ,
						"contrib" ,
						"non-free"
					]
				} ,
				{ 
					"url" : "http://ftp.fr.debian.org/debian/" ,
					"suite" : "jessie-updates" ,
					"sections" : [
						"main" ,
						"contrib" ,
						"non-free"
					]
				}
			]
		}
	]
}

// ----------------------------------------------------------------------------
//
// Definition of groups of packages. Group are more handy for packages manipulation
//
{ "groups-of-packages" : [
		// Base operating system
		{ 
			"group-name" : "base" ,
			"packages"	: [
				{ "name" : "apt" } ,
				{ "name" : "ethtool" } ,
				{ "name" : "gawk" } ,
				{ "name" : "initramfs-tools" } ,
				{ "name" : "isc-dhcp-client" } ,
				{ "name" : "linux-image" } ,
				{ "name" : "locales" } ,
				{ "name" : "sudo" } ,
				{ "name" : "wget" }
			]
		} ,
		// Security security packages
		{ 
			"group-name" : "security" ,
			"packages"	: [
				{ "name" : "shorewall" }
			]
		} ,
		// Some packages used for debugging, not present in production target
		{ 
			"group-name" : "debug" ,
			"packages"	: [
				{ "name" : "apt" } ,
				{ "name" : "apt-utils"  } ,
				{ "name" : "apt-file"  } ,
				{ "name" : "aptitude"  } ,
				{ "name" : "bash-completion"  } ,
				{ "name" : "host" } ,
				{ "name" : "htop" } ,
				{ "name" : "less" } ,
				{ "name" : "lsof" } ,
				{ "name" : "openssh-server"  } ,
				{ "name" : "rsyslog" } ,
				{ "name" : "strace" } ,
				{ "name" : "tree" } ,
				{ "name" : "vim" }
			]
		}
	]
}

// ----------------------------------------------------------------------------
//
// Flavours definitions, uses group-of packages, packages and defines exclusion
//
{ "flavours" : [
		{
			"name" : "debug",
			"groups-of-packages" : [
				"debug"
			], 
			"exclude-group-of-packages" : [
				"security"
			] 
		},
		{
			"name" : "validation",
			"exclude-group-of-packages" : [
				"debug"
			], 
			"packages" : [
				"iotop" 
			]
		},
		{
			"name" : "production",
			"exclude-group-of-packages" : [
				"debug"
			] 
		}
	]
}


// ----------------------------------------------------------------------------
//
// Firmware definitions, based on group of packages to include
//
{ "firmwares" : [
		{
			"name" : "test",
			"groups-of-packages" : [
				"base" ,
				"security"
			] ,
			"packages" : [
				"less" 
			]
		},
		{
			"name" : "depends-test",
			"based-on-firmware" : [
				"test"
			] ,
			"packages" : [
				"iotop" 
			]
		}

	]
}

// ----------------------------------------------------------------------------
//
// Definitions ot the different target boards we support
//
{ "boards" : [
//		{ 
//			"name" : "Beagleboard Black" ,
//			"architecture" : "armel" ,
//			"groups-of-packages" : [
//				"raspberry-pi-2-support"
//			]
//			repository ?
//			kernel ?
//		} ,
		{ 
			"name" : "Raspberry PI 2" ,
			"architecture" : "armhf" ,
			"groups-of-packages" : [
				"raspberry-pi-2-support"
			]
		} ,
		{
			"name" : "Raspberry PI A" ,
			"architecture" : "armel" ,
			"groups-of-packages" : [
				"raspberry-pi-a-support"
			]
		} ,
		{ 
			"name" : "Raspberry PI B 512Mo" ,
			"architecture" : "armel" ,
			"groups-of-packages" : [
				"raspberry-pi-b-support"
			]
		} ,
		{ 
			"name" : "Generic x86-64" ,
			"architecture" : "amd64"
		} ,
		{ 
			"name" : "Generic x86" ,
			"architecture" : "i386"
		} 
	]
}

// ----------------------------------------------------------------------------
//
// Definitions ot the different target boards we support
//
{ "production-targets" : [
		{
			"include-in-build" : false , 
			"name" : "test-Jessie-rpi2" ,
			"board" : "Raspberry PI 2" ,
			"distribution" : "Debian Jessie" ,
			"firmware" : "test" ,
			"flavours-to-build" : [
				"production" 
			]
		} ,
		{ 
			"include-in-build" : true , 
			"name" : "test-Jessie-x86-64" ,
			"board" : "Generic x86-64" ,
			"distribution" : "Debian Jessie" ,
			"firmware" : "test" ,
			"flavours-to-build" : [
				"production" ,
				"validation" ,
				"debug"
			]
		}
	]
}
